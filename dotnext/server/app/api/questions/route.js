"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/questions/route";
exports.ids = ["app/api/questions/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist\\client\\components\\action-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist\\client\\components\\request-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!*********************************************************************************************!*\
  !*** external "next/dist\\client\\components\\static-generation-async-storage.external.js" ***!
  \*********************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\static-generation-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fquestions%2Froute&page=%2Fapi%2Fquestions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fquestions%2Froute.ts&appDir=E%3A%5CDheeraj%5CSNU%5C6th%20Semester%5CIntroduction%20to%20Database%20Systems(CSD317)%5CProject%5CQuizmify%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CDheeraj%5CSNU%5C6th%20Semester%5CIntroduction%20to%20Database%20Systems(CSD317)%5CProject%5CQuizmify&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fquestions%2Froute&page=%2Fapi%2Fquestions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fquestions%2Froute.ts&appDir=E%3A%5CDheeraj%5CSNU%5C6th%20Semester%5CIntroduction%20to%20Database%20Systems(CSD317)%5CProject%5CQuizmify%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CDheeraj%5CSNU%5C6th%20Semester%5CIntroduction%20to%20Database%20Systems(CSD317)%5CProject%5CQuizmify&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var E_Dheeraj_SNU_6th_Semester_Introduction_to_Database_Systems_CSD317_Project_Quizmify_src_app_api_questions_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/questions/route.ts */ \"(rsc)/./src/app/api/questions/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/questions/route\",\n        pathname: \"/api/questions\",\n        filename: \"route\",\n        bundlePath: \"app/api/questions/route\"\n    },\n    resolvedPagePath: \"E:\\\\Dheeraj\\\\SNU\\\\6th Semester\\\\Introduction to Database Systems(CSD317)\\\\Project\\\\Quizmify\\\\src\\\\app\\\\api\\\\questions\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_Dheeraj_SNU_6th_Semester_Introduction_to_Database_Systems_CSD317_Project_Quizmify_src_app_api_questions_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/questions/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZxdWVzdGlvbnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnF1ZXN0aW9ucyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnF1ZXN0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDRGhlZXJhaiU1Q1NOVSU1QzZ0aCUyMFNlbWVzdGVyJTVDSW50cm9kdWN0aW9uJTIwdG8lMjBEYXRhYmFzZSUyMFN5c3RlbXMoQ1NEMzE3KSU1Q1Byb2plY3QlNUNRdWl6bWlmeSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RSUzQSU1Q0RoZWVyYWolNUNTTlUlNUM2dGglMjBTZW1lc3RlciU1Q0ludHJvZHVjdGlvbiUyMHRvJTIwRGF0YWJhc2UlMjBTeXN0ZW1zKENTRDMxNyklNUNQcm9qZWN0JTVDUXVpem1pZnkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ3NEO0FBQ3ZDO0FBQzZGO0FBQzVKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ2lKOztBQUVqSiIsInNvdXJjZXMiOlsid2VicGFjazovL3F1aXptaWZ5Lz9hZmRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIm5leHQvZGlzdC9zZXJ2ZXIvbm9kZS1wb2x5ZmlsbC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJFOlxcXFxEaGVlcmFqXFxcXFNOVVxcXFw2dGggU2VtZXN0ZXJcXFxcSW50cm9kdWN0aW9uIHRvIERhdGFiYXNlIFN5c3RlbXMoQ1NEMzE3KVxcXFxQcm9qZWN0XFxcXFF1aXptaWZ5XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHF1ZXN0aW9uc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3F1ZXN0aW9ucy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3F1ZXN0aW9uc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcXVlc3Rpb25zL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRTpcXFxcRGhlZXJhalxcXFxTTlVcXFxcNnRoIFNlbWVzdGVyXFxcXEludHJvZHVjdGlvbiB0byBEYXRhYmFzZSBTeXN0ZW1zKENTRDMxNylcXFxcUHJvamVjdFxcXFxRdWl6bWlmeVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxxdWVzdGlvbnNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcXVlc3Rpb25zL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fquestions%2Froute&page=%2Fapi%2Fquestions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fquestions%2Froute.ts&appDir=E%3A%5CDheeraj%5CSNU%5C6th%20Semester%5CIntroduction%20to%20Database%20Systems(CSD317)%5CProject%5CQuizmify%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CDheeraj%5CSNU%5C6th%20Semester%5CIntroduction%20to%20Database%20Systems(CSD317)%5CProject%5CQuizmify&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/questions/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/questions/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var _lib_gpt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/gpt */ \"(rsc)/./src/lib/gpt.ts\");\n/* harmony import */ var _lib_nextauth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/nextauth */ \"(rsc)/./src/lib/nextauth.ts\");\n/* harmony import */ var _schemas_questions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/schemas/questions */ \"(rsc)/./src/schemas/questions.ts\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\n\n\n\n\nconst runtime = \"nodejs\";\nconst maxDuration = 5000;\nasync function POST(req, res) {\n    try {\n        const session = await (0,_lib_nextauth__WEBPACK_IMPORTED_MODULE_1__.getAuthSession)();\n        // if (!session?.user) {\n        //   return NextResponse.json(\n        //     { error: \"You must be logged in to create a game.\" },\n        //     {\n        //       status: 401,\n        //     }\n        //   );\n        // }\n        const body = await req.json();\n        const { amount, topic, type } = _schemas_questions__WEBPACK_IMPORTED_MODULE_2__.getQuestionsSchema.parse(body);\n        let questions;\n        if (type === \"open_ended\") {\n            questions = await (0,_lib_gpt__WEBPACK_IMPORTED_MODULE_0__.strict_output)(\"You are a helpful AI that is able to generate a pair of question and answers, the length of each answer should not be more than 15 words, store all the pairs of answers and questions in a JSON array\", new Array(amount).fill(`You are to generate a random hard open-ended questions about ${topic}`), {\n                question: \"question\",\n                answer: \"answer with max length of 15 words\"\n            });\n        } else if (type === \"mcq\") {\n            questions = await (0,_lib_gpt__WEBPACK_IMPORTED_MODULE_0__.strict_output)(\"You are a helpful AI that is able to generate mcq questions and answers, the length of each answer should not be more than 15 words, store all answers and questions and options in a JSON array\", new Array(amount).fill(`You are to generate a random hard mcq question about ${topic}`), {\n                question: \"question\",\n                answer: \"answer with max length of 15 words\",\n                option1: \"option1 with max length of 15 words\",\n                option2: \"option2 with max length of 15 words\",\n                option3: \"option3 with max length of 15 words\"\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n            questions: questions\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_4__.ZodError) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n                error: error.issues\n            }, {\n                status: 400\n            });\n        } else {\n            console.error(\"elle gpt error\", error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_3__[\"default\"].json({\n                error: \"An unexpected error occurred.\"\n            }, {\n                status: 500\n            });\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9xdWVzdGlvbnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEM7QUFDTTtBQUNTO0FBQ2Q7QUFDWjtBQUV4QixNQUFNSyxVQUFVLFNBQVM7QUFDekIsTUFBTUMsY0FBYyxLQUFLO0FBRXpCLGVBQWVDLEtBQUtDLEdBQVksRUFBRUMsR0FBYTtJQUNwRCxJQUFJO1FBQ0YsTUFBTUMsVUFBVSxNQUFNVCw2REFBY0E7UUFDcEMsd0JBQXdCO1FBQ3hCLDhCQUE4QjtRQUM5Qiw0REFBNEQ7UUFDNUQsUUFBUTtRQUNSLHFCQUFxQjtRQUNyQixRQUFRO1FBQ1IsT0FBTztRQUNQLElBQUk7UUFDSixNQUFNVSxPQUFPLE1BQU1ILElBQUlJLElBQUk7UUFDM0IsTUFBTSxFQUFFQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsSUFBSSxFQUFFLEdBQUdiLGtFQUFrQkEsQ0FBQ2MsS0FBSyxDQUFDTDtRQUN6RCxJQUFJTTtRQUNKLElBQUlGLFNBQVMsY0FBYztZQUN6QkUsWUFBWSxNQUFNakIsdURBQWFBLENBQzdCLDBNQUNBLElBQUlrQixNQUFNTCxRQUFRTSxJQUFJLENBQ3BCLENBQUMsNkRBQTZELEVBQUVMLE1BQU0sQ0FBQyxHQUV6RTtnQkFDRU0sVUFBVTtnQkFDVkMsUUFBUTtZQUNWO1FBRUosT0FBTyxJQUFJTixTQUFTLE9BQU87WUFDekJFLFlBQVksTUFBTWpCLHVEQUFhQSxDQUM3QixvTUFDQSxJQUFJa0IsTUFBTUwsUUFBUU0sSUFBSSxDQUNwQixDQUFDLHFEQUFxRCxFQUFFTCxNQUFNLENBQUMsR0FFakU7Z0JBQ0VNLFVBQVU7Z0JBQ1ZDLFFBQVE7Z0JBQ1JDLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RDLFNBQVM7WUFDWDtRQUVKO1FBQ0EsT0FBT3JCLGtGQUFZQSxDQUFDUyxJQUFJLENBQ3RCO1lBQ0VLLFdBQVdBO1FBQ2IsR0FDQTtZQUNFUSxRQUFRO1FBQ1Y7SUFFSixFQUFFLE9BQU9DLE9BQU87UUFDZCxJQUFJQSxpQkFBaUJ0Qix5Q0FBUUEsRUFBRTtZQUM3QixPQUFPRCxrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRWMsT0FBT0EsTUFBTUMsTUFBTTtZQUFDLEdBQ3RCO2dCQUNFRixRQUFRO1lBQ1Y7UUFFSixPQUFPO1lBQ0xHLFFBQVFGLEtBQUssQ0FBQyxrQkFBa0JBO1lBQ2hDLE9BQU92QixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRWMsT0FBTztZQUFnQyxHQUN6QztnQkFDRUQsUUFBUTtZQUNWO1FBRUo7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcXVpem1pZnkvLi9zcmMvYXBwL2FwaS9xdWVzdGlvbnMvcm91dGUudHM/ZTExMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdHJpY3Rfb3V0cHV0IH0gZnJvbSBcIkAvbGliL2dwdFwiO1xuaW1wb3J0IHsgZ2V0QXV0aFNlc3Npb24gfSBmcm9tIFwiQC9saWIvbmV4dGF1dGhcIjtcbmltcG9ydCB7IGdldFF1ZXN0aW9uc1NjaGVtYSB9IGZyb20gXCJAL3NjaGVtYXMvcXVlc3Rpb25zXCI7XG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IFpvZEVycm9yIH0gZnJvbSBcInpvZFwiO1xuXG5leHBvcnQgY29uc3QgcnVudGltZSA9IFwibm9kZWpzXCI7XG5leHBvcnQgY29uc3QgbWF4RHVyYXRpb24gPSA1MDAwO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0QXV0aFNlc3Npb24oKTtcbiAgICAvLyBpZiAoIXNlc3Npb24/LnVzZXIpIHtcbiAgICAvLyAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAvLyAgICAgeyBlcnJvcjogXCJZb3UgbXVzdCBiZSBsb2dnZWQgaW4gdG8gY3JlYXRlIGEgZ2FtZS5cIiB9LFxuICAgIC8vICAgICB7XG4gICAgLy8gICAgICAgc3RhdHVzOiA0MDEsXG4gICAgLy8gICAgIH1cbiAgICAvLyAgICk7XG4gICAgLy8gfVxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICAgIGNvbnN0IHsgYW1vdW50LCB0b3BpYywgdHlwZSB9ID0gZ2V0UXVlc3Rpb25zU2NoZW1hLnBhcnNlKGJvZHkpO1xuICAgIGxldCBxdWVzdGlvbnM6IGFueTtcbiAgICBpZiAodHlwZSA9PT0gXCJvcGVuX2VuZGVkXCIpIHtcbiAgICAgIHF1ZXN0aW9ucyA9IGF3YWl0IHN0cmljdF9vdXRwdXQoXG4gICAgICAgIFwiWW91IGFyZSBhIGhlbHBmdWwgQUkgdGhhdCBpcyBhYmxlIHRvIGdlbmVyYXRlIGEgcGFpciBvZiBxdWVzdGlvbiBhbmQgYW5zd2VycywgdGhlIGxlbmd0aCBvZiBlYWNoIGFuc3dlciBzaG91bGQgbm90IGJlIG1vcmUgdGhhbiAxNSB3b3Jkcywgc3RvcmUgYWxsIHRoZSBwYWlycyBvZiBhbnN3ZXJzIGFuZCBxdWVzdGlvbnMgaW4gYSBKU09OIGFycmF5XCIsXG4gICAgICAgIG5ldyBBcnJheShhbW91bnQpLmZpbGwoXG4gICAgICAgICAgYFlvdSBhcmUgdG8gZ2VuZXJhdGUgYSByYW5kb20gaGFyZCBvcGVuLWVuZGVkIHF1ZXN0aW9ucyBhYm91dCAke3RvcGljfWBcbiAgICAgICAgKSxcbiAgICAgICAge1xuICAgICAgICAgIHF1ZXN0aW9uOiBcInF1ZXN0aW9uXCIsXG4gICAgICAgICAgYW5zd2VyOiBcImFuc3dlciB3aXRoIG1heCBsZW5ndGggb2YgMTUgd29yZHNcIixcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibWNxXCIpIHtcbiAgICAgIHF1ZXN0aW9ucyA9IGF3YWl0IHN0cmljdF9vdXRwdXQoXG4gICAgICAgIFwiWW91IGFyZSBhIGhlbHBmdWwgQUkgdGhhdCBpcyBhYmxlIHRvIGdlbmVyYXRlIG1jcSBxdWVzdGlvbnMgYW5kIGFuc3dlcnMsIHRoZSBsZW5ndGggb2YgZWFjaCBhbnN3ZXIgc2hvdWxkIG5vdCBiZSBtb3JlIHRoYW4gMTUgd29yZHMsIHN0b3JlIGFsbCBhbnN3ZXJzIGFuZCBxdWVzdGlvbnMgYW5kIG9wdGlvbnMgaW4gYSBKU09OIGFycmF5XCIsXG4gICAgICAgIG5ldyBBcnJheShhbW91bnQpLmZpbGwoXG4gICAgICAgICAgYFlvdSBhcmUgdG8gZ2VuZXJhdGUgYSByYW5kb20gaGFyZCBtY3EgcXVlc3Rpb24gYWJvdXQgJHt0b3BpY31gXG4gICAgICAgICksXG4gICAgICAgIHtcbiAgICAgICAgICBxdWVzdGlvbjogXCJxdWVzdGlvblwiLFxuICAgICAgICAgIGFuc3dlcjogXCJhbnN3ZXIgd2l0aCBtYXggbGVuZ3RoIG9mIDE1IHdvcmRzXCIsXG4gICAgICAgICAgb3B0aW9uMTogXCJvcHRpb24xIHdpdGggbWF4IGxlbmd0aCBvZiAxNSB3b3Jkc1wiLFxuICAgICAgICAgIG9wdGlvbjI6IFwib3B0aW9uMiB3aXRoIG1heCBsZW5ndGggb2YgMTUgd29yZHNcIixcbiAgICAgICAgICBvcHRpb24zOiBcIm9wdGlvbjMgd2l0aCBtYXggbGVuZ3RoIG9mIDE1IHdvcmRzXCIsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgcXVlc3Rpb25zOiBxdWVzdGlvbnMsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIH1cbiAgICApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFpvZEVycm9yKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IGVycm9yLmlzc3VlcyB9LFxuICAgICAgICB7XG4gICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJlbGxlIGdwdCBlcnJvclwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC5cIiB9LFxuICAgICAgICB7XG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsic3RyaWN0X291dHB1dCIsImdldEF1dGhTZXNzaW9uIiwiZ2V0UXVlc3Rpb25zU2NoZW1hIiwiTmV4dFJlc3BvbnNlIiwiWm9kRXJyb3IiLCJydW50aW1lIiwibWF4RHVyYXRpb24iLCJQT1NUIiwicmVxIiwicmVzIiwic2Vzc2lvbiIsImJvZHkiLCJqc29uIiwiYW1vdW50IiwidG9waWMiLCJ0eXBlIiwicGFyc2UiLCJxdWVzdGlvbnMiLCJBcnJheSIsImZpbGwiLCJxdWVzdGlvbiIsImFuc3dlciIsIm9wdGlvbjEiLCJvcHRpb24yIiwib3B0aW9uMyIsInN0YXR1cyIsImVycm9yIiwiaXNzdWVzIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/questions/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! server-only */ \"(rsc)/./node_modules/next/dist/compiled/server-only/empty.js\");\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(server_only__WEBPACK_IMPORTED_MODULE_1__);\n\n\nlet prisma;\nif (false) {} else {\n    if (!global.cachedPrisma) {\n        global.cachedPrisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n    }\n    prisma = global.cachedPrisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThDO0FBQ3pCO0FBT2QsSUFBSUMsT0FBcUI7QUFDaEMsSUFBSUMsS0FBcUMsRUFBRSxFQUUxQyxNQUFNO0lBQ0wsSUFBSSxDQUFDQyxPQUFPQyxZQUFZLEVBQUU7UUFDeEJELE9BQU9DLFlBQVksR0FBRyxJQUFJSix3REFBWUE7SUFDeEM7SUFDQUMsU0FBU0UsT0FBT0MsWUFBWTtBQUM5QiIsInNvdXJjZXMiOlsid2VicGFjazovL3F1aXptaWZ5Ly4vc3JjL2xpYi9kYi50cz85ZTRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IFwic2VydmVyLW9ubHlcIjtcblxuZGVjbGFyZSBnbG9iYWwge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyLCBuby11bnVzZWQtdmFyc1xuICB2YXIgY2FjaGVkUHJpc21hOiBQcmlzbWFDbGllbnQ7XG59XG5cbmV4cG9ydCBsZXQgcHJpc21hOiBQcmlzbWFDbGllbnQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gIHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcbn0gZWxzZSB7XG4gIGlmICghZ2xvYmFsLmNhY2hlZFByaXNtYSkge1xuICAgIGdsb2JhbC5jYWNoZWRQcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XG4gIH1cbiAgcHJpc21hID0gZ2xvYmFsLmNhY2hlZFByaXNtYTtcbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiLCJwcm9jZXNzIiwiZ2xvYmFsIiwiY2FjaGVkUHJpc21hIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/gpt.ts":
/*!************************!*\
  !*** ./src/lib/gpt.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   strict_output: () => (/* binding */ strict_output)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/dist/index.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(openai__WEBPACK_IMPORTED_MODULE_0__);\n\nconst configuration = new openai__WEBPACK_IMPORTED_MODULE_0__.Configuration({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAIApi(configuration);\nasync function strict_output(system_prompt, user_prompt, output_format, default_category = \"\", output_value_only = false, model = \"gpt-3.5-turbo\", temperature = 1, num_tries = 3, verbose = false) {\n    // if the user input is in a list, we also process the output as a list of json\n    const list_input = Array.isArray(user_prompt);\n    // if the output format contains dynamic elements of < or >, then add to the prompt to handle dynamic elements\n    const dynamic_elements = /<.*?>/.test(JSON.stringify(output_format));\n    // if the output format contains list elements of [ or ], then we add to the prompt to handle lists\n    const list_output = /\\[.*?\\]/.test(JSON.stringify(output_format));\n    // start off with no error message\n    let error_msg = \"\";\n    for(let i = 0; i < num_tries; i++){\n        let output_format_prompt = `\\nYou are to output the following in json format: ${JSON.stringify(output_format)}. \\nDo not put quotation marks or escape character \\\\ in the output fields.`;\n        if (list_output) {\n            output_format_prompt += `\\nIf output field is a list, classify output into the best element of the list.`;\n        }\n        // if output_format contains dynamic elements, process it accordingly\n        if (dynamic_elements) {\n            output_format_prompt += `\\nAny text enclosed by < and > indicates you must generate content to replace it. Example input: Go to <location>, Example output: Go to the garden\\nAny output key containing < and > indicates you must generate the key name to replace it. Example input: {'<location>': 'description of location'}, Example output: {school: a place for education}`;\n        }\n        // if input is in a list format, ask it to generate json in a list\n        if (list_input) {\n            output_format_prompt += `\\nGenerate a list of json, one json for each input element.`;\n        }\n        // Use OpenAI to get a response\n        const response = await openai.createChatCompletion({\n            temperature: temperature,\n            model: model,\n            messages: [\n                {\n                    role: \"system\",\n                    content: system_prompt + output_format_prompt + error_msg\n                },\n                {\n                    role: \"user\",\n                    content: user_prompt.toString()\n                }\n            ]\n        });\n        let res = response.data.choices[0].message?.content?.replace(/'/g, '\"') ?? \"\";\n        // ensure that we don't replace away apostrophes in text\n        res = res.replace(/(\\w)\"(\\w)/g, \"$1'$2\");\n        if (verbose) {\n            console.log(\"System prompt:\", system_prompt + output_format_prompt + error_msg);\n            console.log(\"\\nUser prompt:\", user_prompt);\n            console.log(\"\\nGPT response:\", res);\n        }\n        // try-catch block to ensure output format is adhered to\n        try {\n            let output = JSON.parse(res);\n            if (list_input) {\n                if (!Array.isArray(output)) {\n                    throw new Error(\"Output format not in a list of json\");\n                }\n            } else {\n                output = [\n                    output\n                ];\n            }\n            // check for each element in the output_list, the format is correctly adhered to\n            for(let index = 0; index < output.length; index++){\n                for(const key in output_format){\n                    // unable to ensure accuracy of dynamic output header, so skip it\n                    if (/<.*?>/.test(key)) {\n                        continue;\n                    }\n                    // if output field missing, raise an error\n                    if (!(key in output[index])) {\n                        throw new Error(`${key} not in json output`);\n                    }\n                    // check that one of the choices given for the list of words is an unknown\n                    if (Array.isArray(output_format[key])) {\n                        const choices = output_format[key];\n                        // ensure output is not a list\n                        if (Array.isArray(output[index][key])) {\n                            output[index][key] = output[index][key][0];\n                        }\n                        // output the default category (if any) if GPT is unable to identify the category\n                        if (!choices.includes(output[index][key]) && default_category) {\n                            output[index][key] = default_category;\n                        }\n                        // if the output is a description format, get only the label\n                        if (output[index][key].includes(\":\")) {\n                            output[index][key] = output[index][key].split(\":\")[0];\n                        }\n                    }\n                }\n                // if we just want the values for the outputs\n                if (output_value_only) {\n                    output[index] = Object.values(output[index]);\n                    // just output without the list if there is only one element\n                    if (output[index].length === 1) {\n                        output[index] = output[index][0];\n                    }\n                }\n            }\n            return list_input ? output : output[0];\n        } catch (e) {\n            error_msg = `\\n\\nResult: ${res}\\n\\nError message: ${e}`;\n            console.log(\"An exception occurred:\", e);\n            console.log(\"Current invalid json format:\", res);\n        }\n    }\n    return [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2dwdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0Q7QUFFbEQsTUFBTUUsZ0JBQWdCLElBQUlGLGlEQUFhQSxDQUFDO0lBQ3RDRyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7QUFDcEM7QUFDQSxNQUFNQyxTQUFTLElBQUlOLDZDQUFTQSxDQUFDQztBQU10QixlQUFlTSxjQUNwQkMsYUFBcUIsRUFDckJDLFdBQThCLEVBQzlCQyxhQUEyQixFQUMzQkMsbUJBQTJCLEVBQUUsRUFDN0JDLG9CQUE2QixLQUFLLEVBQ2xDQyxRQUFnQixlQUFlLEVBQy9CQyxjQUFzQixDQUFDLEVBQ3ZCQyxZQUFvQixDQUFDLEVBQ3JCQyxVQUFtQixLQUFLO0lBT3hCLCtFQUErRTtJQUMvRSxNQUFNQyxhQUFzQkMsTUFBTUMsT0FBTyxDQUFDVjtJQUMxQyw4R0FBOEc7SUFDOUcsTUFBTVcsbUJBQTRCLFFBQVFDLElBQUksQ0FBQ0MsS0FBS0MsU0FBUyxDQUFDYjtJQUM5RCxtR0FBbUc7SUFDbkcsTUFBTWMsY0FBdUIsVUFBVUgsSUFBSSxDQUFDQyxLQUFLQyxTQUFTLENBQUNiO0lBRTNELGtDQUFrQztJQUNsQyxJQUFJZSxZQUFvQjtJQUV4QixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVgsV0FBV1csSUFBSztRQUNsQyxJQUFJQyx1QkFBK0IsQ0FBQyxrREFBa0QsRUFBRUwsS0FBS0MsU0FBUyxDQUNwR2IsZUFDQSwyRUFBMkUsQ0FBQztRQUU5RSxJQUFJYyxhQUFhO1lBQ2ZHLHdCQUF3QixDQUFDLCtFQUErRSxDQUFDO1FBQzNHO1FBRUEscUVBQXFFO1FBQ3JFLElBQUlQLGtCQUFrQjtZQUNwQk8sd0JBQXdCLENBQUMsd1ZBQXdWLENBQUM7UUFDcFg7UUFFQSxrRUFBa0U7UUFDbEUsSUFBSVYsWUFBWTtZQUNkVSx3QkFBd0IsQ0FBQywyREFBMkQsQ0FBQztRQUN2RjtRQUVBLCtCQUErQjtRQUMvQixNQUFNQyxXQUFXLE1BQU10QixPQUFPdUIsb0JBQW9CLENBQUM7WUFDakRmLGFBQWFBO1lBQ2JELE9BQU9BO1lBQ1BpQixVQUFVO2dCQUNSO29CQUNFQyxNQUFNO29CQUNOQyxTQUFTeEIsZ0JBQWdCbUIsdUJBQXVCRjtnQkFDbEQ7Z0JBQ0E7b0JBQUVNLE1BQU07b0JBQVFDLFNBQVN2QixZQUFZd0IsUUFBUTtnQkFBRzthQUNqRDtRQUNIO1FBRUEsSUFBSUMsTUFDRk4sU0FBU08sSUFBSSxDQUFDQyxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLEVBQUVMLFNBQVNNLFFBQVEsTUFBTSxRQUFRO1FBRW5FLHdEQUF3RDtRQUN4REosTUFBTUEsSUFBSUksT0FBTyxDQUFDLGNBQWM7UUFFaEMsSUFBSXRCLFNBQVM7WUFDWHVCLFFBQVFDLEdBQUcsQ0FDVCxrQkFDQWhDLGdCQUFnQm1CLHVCQUF1QkY7WUFFekNjLFFBQVFDLEdBQUcsQ0FBQyxrQkFBa0IvQjtZQUM5QjhCLFFBQVFDLEdBQUcsQ0FBQyxtQkFBbUJOO1FBQ2pDO1FBRUEsd0RBQXdEO1FBQ3hELElBQUk7WUFDRixJQUFJTyxTQUFjbkIsS0FBS29CLEtBQUssQ0FBQ1I7WUFFN0IsSUFBSWpCLFlBQVk7Z0JBQ2QsSUFBSSxDQUFDQyxNQUFNQyxPQUFPLENBQUNzQixTQUFTO29CQUMxQixNQUFNLElBQUlFLE1BQU07Z0JBQ2xCO1lBQ0YsT0FBTztnQkFDTEYsU0FBUztvQkFBQ0E7aUJBQU87WUFDbkI7WUFFQSxnRkFBZ0Y7WUFDaEYsSUFBSyxJQUFJRyxRQUFRLEdBQUdBLFFBQVFILE9BQU9JLE1BQU0sRUFBRUQsUUFBUztnQkFDbEQsSUFBSyxNQUFNRSxPQUFPcEMsY0FBZTtvQkFDL0IsaUVBQWlFO29CQUNqRSxJQUFJLFFBQVFXLElBQUksQ0FBQ3lCLE1BQU07d0JBQ3JCO29CQUNGO29CQUVBLDBDQUEwQztvQkFDMUMsSUFBSSxDQUFFQSxDQUFBQSxPQUFPTCxNQUFNLENBQUNHLE1BQU0sR0FBRzt3QkFDM0IsTUFBTSxJQUFJRCxNQUFNLENBQUMsRUFBRUcsSUFBSSxtQkFBbUIsQ0FBQztvQkFDN0M7b0JBRUEsMEVBQTBFO29CQUMxRSxJQUFJNUIsTUFBTUMsT0FBTyxDQUFDVCxhQUFhLENBQUNvQyxJQUFJLEdBQUc7d0JBQ3JDLE1BQU1WLFVBQVUxQixhQUFhLENBQUNvQyxJQUFJO3dCQUNsQyw4QkFBOEI7d0JBQzlCLElBQUk1QixNQUFNQyxPQUFPLENBQUNzQixNQUFNLENBQUNHLE1BQU0sQ0FBQ0UsSUFBSSxHQUFHOzRCQUNyQ0wsTUFBTSxDQUFDRyxNQUFNLENBQUNFLElBQUksR0FBR0wsTUFBTSxDQUFDRyxNQUFNLENBQUNFLElBQUksQ0FBQyxFQUFFO3dCQUM1Qzt3QkFDQSxpRkFBaUY7d0JBQ2pGLElBQUksQ0FBQ1YsUUFBUVcsUUFBUSxDQUFDTixNQUFNLENBQUNHLE1BQU0sQ0FBQ0UsSUFBSSxLQUFLbkMsa0JBQWtCOzRCQUM3RDhCLE1BQU0sQ0FBQ0csTUFBTSxDQUFDRSxJQUFJLEdBQUduQzt3QkFDdkI7d0JBQ0EsNERBQTREO3dCQUM1RCxJQUFJOEIsTUFBTSxDQUFDRyxNQUFNLENBQUNFLElBQUksQ0FBQ0MsUUFBUSxDQUFDLE1BQU07NEJBQ3BDTixNQUFNLENBQUNHLE1BQU0sQ0FBQ0UsSUFBSSxHQUFHTCxNQUFNLENBQUNHLE1BQU0sQ0FBQ0UsSUFBSSxDQUFDRSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7d0JBQ3ZEO29CQUNGO2dCQUNGO2dCQUVBLDZDQUE2QztnQkFDN0MsSUFBSXBDLG1CQUFtQjtvQkFDckI2QixNQUFNLENBQUNHLE1BQU0sR0FBR0ssT0FBT0MsTUFBTSxDQUFDVCxNQUFNLENBQUNHLE1BQU07b0JBQzNDLDREQUE0RDtvQkFDNUQsSUFBSUgsTUFBTSxDQUFDRyxNQUFNLENBQUNDLE1BQU0sS0FBSyxHQUFHO3dCQUM5QkosTUFBTSxDQUFDRyxNQUFNLEdBQUdILE1BQU0sQ0FBQ0csTUFBTSxDQUFDLEVBQUU7b0JBQ2xDO2dCQUNGO1lBQ0Y7WUFFQSxPQUFPM0IsYUFBYXdCLFNBQVNBLE1BQU0sQ0FBQyxFQUFFO1FBQ3hDLEVBQUUsT0FBT1UsR0FBRztZQUNWMUIsWUFBWSxDQUFDLFlBQVksRUFBRVMsSUFBSSxtQkFBbUIsRUFBRWlCLEVBQUUsQ0FBQztZQUN2RFosUUFBUUMsR0FBRyxDQUFDLDBCQUEwQlc7WUFDdENaLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0NOO1FBQzlDO0lBQ0Y7SUFFQSxPQUFPLEVBQUU7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL3F1aXptaWZ5Ly4vc3JjL2xpYi9ncHQudHM/MTllMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25maWd1cmF0aW9uLCBPcGVuQUlBcGkgfSBmcm9tIFwib3BlbmFpXCI7XG5cbmNvbnN0IGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbih7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG59KTtcbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUlBcGkoY29uZmlndXJhdGlvbik7XG5cbmludGVyZmFjZSBPdXRwdXRGb3JtYXQge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBzdHJpbmdbXSB8IE91dHB1dEZvcm1hdDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0cmljdF9vdXRwdXQoXG4gIHN5c3RlbV9wcm9tcHQ6IHN0cmluZyxcbiAgdXNlcl9wcm9tcHQ6IHN0cmluZyB8IHN0cmluZ1tdLFxuICBvdXRwdXRfZm9ybWF0OiBPdXRwdXRGb3JtYXQsXG4gIGRlZmF1bHRfY2F0ZWdvcnk6IHN0cmluZyA9IFwiXCIsXG4gIG91dHB1dF92YWx1ZV9vbmx5OiBib29sZWFuID0gZmFsc2UsXG4gIG1vZGVsOiBzdHJpbmcgPSBcImdwdC0zLjUtdHVyYm9cIixcbiAgdGVtcGVyYXR1cmU6IG51bWJlciA9IDEsXG4gIG51bV90cmllczogbnVtYmVyID0gMyxcbiAgdmVyYm9zZTogYm9vbGVhbiA9IGZhbHNlXG4pOiBQcm9taXNlPFxuICB7XG4gICAgcXVlc3Rpb246IHN0cmluZztcbiAgICBhbnN3ZXI6IHN0cmluZztcbiAgfVtdXG4+IHtcbiAgLy8gaWYgdGhlIHVzZXIgaW5wdXQgaXMgaW4gYSBsaXN0LCB3ZSBhbHNvIHByb2Nlc3MgdGhlIG91dHB1dCBhcyBhIGxpc3Qgb2YganNvblxuICBjb25zdCBsaXN0X2lucHV0OiBib29sZWFuID0gQXJyYXkuaXNBcnJheSh1c2VyX3Byb21wdCk7XG4gIC8vIGlmIHRoZSBvdXRwdXQgZm9ybWF0IGNvbnRhaW5zIGR5bmFtaWMgZWxlbWVudHMgb2YgPCBvciA+LCB0aGVuIGFkZCB0byB0aGUgcHJvbXB0IHRvIGhhbmRsZSBkeW5hbWljIGVsZW1lbnRzXG4gIGNvbnN0IGR5bmFtaWNfZWxlbWVudHM6IGJvb2xlYW4gPSAvPC4qPz4vLnRlc3QoSlNPTi5zdHJpbmdpZnkob3V0cHV0X2Zvcm1hdCkpO1xuICAvLyBpZiB0aGUgb3V0cHV0IGZvcm1hdCBjb250YWlucyBsaXN0IGVsZW1lbnRzIG9mIFsgb3IgXSwgdGhlbiB3ZSBhZGQgdG8gdGhlIHByb21wdCB0byBoYW5kbGUgbGlzdHNcbiAgY29uc3QgbGlzdF9vdXRwdXQ6IGJvb2xlYW4gPSAvXFxbLio/XFxdLy50ZXN0KEpTT04uc3RyaW5naWZ5KG91dHB1dF9mb3JtYXQpKTtcblxuICAvLyBzdGFydCBvZmYgd2l0aCBubyBlcnJvciBtZXNzYWdlXG4gIGxldCBlcnJvcl9tc2c6IHN0cmluZyA9IFwiXCI7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1fdHJpZXM7IGkrKykge1xuICAgIGxldCBvdXRwdXRfZm9ybWF0X3Byb21wdDogc3RyaW5nID0gYFxcbllvdSBhcmUgdG8gb3V0cHV0IHRoZSBmb2xsb3dpbmcgaW4ganNvbiBmb3JtYXQ6ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICBvdXRwdXRfZm9ybWF0XG4gICAgKX0uIFxcbkRvIG5vdCBwdXQgcXVvdGF0aW9uIG1hcmtzIG9yIGVzY2FwZSBjaGFyYWN0ZXIgXFxcXCBpbiB0aGUgb3V0cHV0IGZpZWxkcy5gO1xuXG4gICAgaWYgKGxpc3Rfb3V0cHV0KSB7XG4gICAgICBvdXRwdXRfZm9ybWF0X3Byb21wdCArPSBgXFxuSWYgb3V0cHV0IGZpZWxkIGlzIGEgbGlzdCwgY2xhc3NpZnkgb3V0cHV0IGludG8gdGhlIGJlc3QgZWxlbWVudCBvZiB0aGUgbGlzdC5gO1xuICAgIH1cblxuICAgIC8vIGlmIG91dHB1dF9mb3JtYXQgY29udGFpbnMgZHluYW1pYyBlbGVtZW50cywgcHJvY2VzcyBpdCBhY2NvcmRpbmdseVxuICAgIGlmIChkeW5hbWljX2VsZW1lbnRzKSB7XG4gICAgICBvdXRwdXRfZm9ybWF0X3Byb21wdCArPSBgXFxuQW55IHRleHQgZW5jbG9zZWQgYnkgPCBhbmQgPiBpbmRpY2F0ZXMgeW91IG11c3QgZ2VuZXJhdGUgY29udGVudCB0byByZXBsYWNlIGl0LiBFeGFtcGxlIGlucHV0OiBHbyB0byA8bG9jYXRpb24+LCBFeGFtcGxlIG91dHB1dDogR28gdG8gdGhlIGdhcmRlblxcbkFueSBvdXRwdXQga2V5IGNvbnRhaW5pbmcgPCBhbmQgPiBpbmRpY2F0ZXMgeW91IG11c3QgZ2VuZXJhdGUgdGhlIGtleSBuYW1lIHRvIHJlcGxhY2UgaXQuIEV4YW1wbGUgaW5wdXQ6IHsnPGxvY2F0aW9uPic6ICdkZXNjcmlwdGlvbiBvZiBsb2NhdGlvbid9LCBFeGFtcGxlIG91dHB1dDoge3NjaG9vbDogYSBwbGFjZSBmb3IgZWR1Y2F0aW9ufWA7XG4gICAgfVxuXG4gICAgLy8gaWYgaW5wdXQgaXMgaW4gYSBsaXN0IGZvcm1hdCwgYXNrIGl0IHRvIGdlbmVyYXRlIGpzb24gaW4gYSBsaXN0XG4gICAgaWYgKGxpc3RfaW5wdXQpIHtcbiAgICAgIG91dHB1dF9mb3JtYXRfcHJvbXB0ICs9IGBcXG5HZW5lcmF0ZSBhIGxpc3Qgb2YganNvbiwgb25lIGpzb24gZm9yIGVhY2ggaW5wdXQgZWxlbWVudC5gO1xuICAgIH1cblxuICAgIC8vIFVzZSBPcGVuQUkgdG8gZ2V0IGEgcmVzcG9uc2VcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jcmVhdGVDaGF0Q29tcGxldGlvbih7XG4gICAgICB0ZW1wZXJhdHVyZTogdGVtcGVyYXR1cmUsXG4gICAgICBtb2RlbDogbW9kZWwsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICBjb250ZW50OiBzeXN0ZW1fcHJvbXB0ICsgb3V0cHV0X2Zvcm1hdF9wcm9tcHQgKyBlcnJvcl9tc2csXG4gICAgICAgIH0sXG4gICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHVzZXJfcHJvbXB0LnRvU3RyaW5nKCkgfSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBsZXQgcmVzOiBzdHJpbmcgPVxuICAgICAgcmVzcG9uc2UuZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2U/LmNvbnRlbnQ/LnJlcGxhY2UoLycvZywgJ1wiJykgPz8gXCJcIjtcblxuICAgIC8vIGVuc3VyZSB0aGF0IHdlIGRvbid0IHJlcGxhY2UgYXdheSBhcG9zdHJvcGhlcyBpbiB0ZXh0XG4gICAgcmVzID0gcmVzLnJlcGxhY2UoLyhcXHcpXCIoXFx3KS9nLCBcIiQxJyQyXCIpO1xuXG4gICAgaWYgKHZlcmJvc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIlN5c3RlbSBwcm9tcHQ6XCIsXG4gICAgICAgIHN5c3RlbV9wcm9tcHQgKyBvdXRwdXRfZm9ybWF0X3Byb21wdCArIGVycm9yX21zZ1xuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiXFxuVXNlciBwcm9tcHQ6XCIsIHVzZXJfcHJvbXB0KTtcbiAgICAgIGNvbnNvbGUubG9nKFwiXFxuR1BUIHJlc3BvbnNlOlwiLCByZXMpO1xuICAgIH1cblxuICAgIC8vIHRyeS1jYXRjaCBibG9jayB0byBlbnN1cmUgb3V0cHV0IGZvcm1hdCBpcyBhZGhlcmVkIHRvXG4gICAgdHJ5IHtcbiAgICAgIGxldCBvdXRwdXQ6IGFueSA9IEpTT04ucGFyc2UocmVzKTtcblxuICAgICAgaWYgKGxpc3RfaW5wdXQpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG91dHB1dCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdXRwdXQgZm9ybWF0IG5vdCBpbiBhIGxpc3Qgb2YganNvblwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0ID0gW291dHB1dF07XG4gICAgICB9XG5cbiAgICAgIC8vIGNoZWNrIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG91dHB1dF9saXN0LCB0aGUgZm9ybWF0IGlzIGNvcnJlY3RseSBhZGhlcmVkIHRvXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb3V0cHV0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvdXRwdXRfZm9ybWF0KSB7XG4gICAgICAgICAgLy8gdW5hYmxlIHRvIGVuc3VyZSBhY2N1cmFjeSBvZiBkeW5hbWljIG91dHB1dCBoZWFkZXIsIHNvIHNraXAgaXRcbiAgICAgICAgICBpZiAoLzwuKj8+Ly50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIG91dHB1dCBmaWVsZCBtaXNzaW5nLCByYWlzZSBhbiBlcnJvclxuICAgICAgICAgIGlmICghKGtleSBpbiBvdXRwdXRbaW5kZXhdKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gbm90IGluIGpzb24gb3V0cHV0YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gY2hlY2sgdGhhdCBvbmUgb2YgdGhlIGNob2ljZXMgZ2l2ZW4gZm9yIHRoZSBsaXN0IG9mIHdvcmRzIGlzIGFuIHVua25vd25cbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRfZm9ybWF0W2tleV0pKSB7XG4gICAgICAgICAgICBjb25zdCBjaG9pY2VzID0gb3V0cHV0X2Zvcm1hdFtrZXldIGFzIHN0cmluZ1tdO1xuICAgICAgICAgICAgLy8gZW5zdXJlIG91dHB1dCBpcyBub3QgYSBsaXN0XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRbaW5kZXhdW2tleV0pKSB7XG4gICAgICAgICAgICAgIG91dHB1dFtpbmRleF1ba2V5XSA9IG91dHB1dFtpbmRleF1ba2V5XVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG91dHB1dCB0aGUgZGVmYXVsdCBjYXRlZ29yeSAoaWYgYW55KSBpZiBHUFQgaXMgdW5hYmxlIHRvIGlkZW50aWZ5IHRoZSBjYXRlZ29yeVxuICAgICAgICAgICAgaWYgKCFjaG9pY2VzLmluY2x1ZGVzKG91dHB1dFtpbmRleF1ba2V5XSkgJiYgZGVmYXVsdF9jYXRlZ29yeSkge1xuICAgICAgICAgICAgICBvdXRwdXRbaW5kZXhdW2tleV0gPSBkZWZhdWx0X2NhdGVnb3J5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgdGhlIG91dHB1dCBpcyBhIGRlc2NyaXB0aW9uIGZvcm1hdCwgZ2V0IG9ubHkgdGhlIGxhYmVsXG4gICAgICAgICAgICBpZiAob3V0cHV0W2luZGV4XVtrZXldLmluY2x1ZGVzKFwiOlwiKSkge1xuICAgICAgICAgICAgICBvdXRwdXRbaW5kZXhdW2tleV0gPSBvdXRwdXRbaW5kZXhdW2tleV0uc3BsaXQoXCI6XCIpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHdlIGp1c3Qgd2FudCB0aGUgdmFsdWVzIGZvciB0aGUgb3V0cHV0c1xuICAgICAgICBpZiAob3V0cHV0X3ZhbHVlX29ubHkpIHtcbiAgICAgICAgICBvdXRwdXRbaW5kZXhdID0gT2JqZWN0LnZhbHVlcyhvdXRwdXRbaW5kZXhdKTtcbiAgICAgICAgICAvLyBqdXN0IG91dHB1dCB3aXRob3V0IHRoZSBsaXN0IGlmIHRoZXJlIGlzIG9ubHkgb25lIGVsZW1lbnRcbiAgICAgICAgICBpZiAob3V0cHV0W2luZGV4XS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIG91dHB1dFtpbmRleF0gPSBvdXRwdXRbaW5kZXhdWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbGlzdF9pbnB1dCA/IG91dHB1dCA6IG91dHB1dFswXTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlcnJvcl9tc2cgPSBgXFxuXFxuUmVzdWx0OiAke3Jlc31cXG5cXG5FcnJvciBtZXNzYWdlOiAke2V9YDtcbiAgICAgIGNvbnNvbGUubG9nKFwiQW4gZXhjZXB0aW9uIG9jY3VycmVkOlwiLCBlKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ3VycmVudCBpbnZhbGlkIGpzb24gZm9ybWF0OlwiLCByZXMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbXTtcbn1cbiJdLCJuYW1lcyI6WyJDb25maWd1cmF0aW9uIiwiT3BlbkFJQXBpIiwiY29uZmlndXJhdGlvbiIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIm9wZW5haSIsInN0cmljdF9vdXRwdXQiLCJzeXN0ZW1fcHJvbXB0IiwidXNlcl9wcm9tcHQiLCJvdXRwdXRfZm9ybWF0IiwiZGVmYXVsdF9jYXRlZ29yeSIsIm91dHB1dF92YWx1ZV9vbmx5IiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsIm51bV90cmllcyIsInZlcmJvc2UiLCJsaXN0X2lucHV0IiwiQXJyYXkiLCJpc0FycmF5IiwiZHluYW1pY19lbGVtZW50cyIsInRlc3QiLCJKU09OIiwic3RyaW5naWZ5IiwibGlzdF9vdXRwdXQiLCJlcnJvcl9tc2ciLCJpIiwib3V0cHV0X2Zvcm1hdF9wcm9tcHQiLCJyZXNwb25zZSIsImNyZWF0ZUNoYXRDb21wbGV0aW9uIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRvU3RyaW5nIiwicmVzIiwiZGF0YSIsImNob2ljZXMiLCJtZXNzYWdlIiwicmVwbGFjZSIsImNvbnNvbGUiLCJsb2ciLCJvdXRwdXQiLCJwYXJzZSIsIkVycm9yIiwiaW5kZXgiLCJsZW5ndGgiLCJrZXkiLCJpbmNsdWRlcyIsInNwbGl0IiwiT2JqZWN0IiwidmFsdWVzIiwiZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/gpt.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/nextauth.ts":
/*!*****************************!*\
  !*** ./src/lib/nextauth.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   getAuthSession: () => (/* binding */ getAuthSession)\n/* harmony export */ });\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"(rsc)/./node_modules/@next-auth/prisma-adapter/dist/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n\n\n\n\nconst authOptions = {\n    session: {\n        strategy: \"jwt\"\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    callbacks: {\n        jwt: async ({ token })=>{\n            const db_user = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findFirst({\n                where: {\n                    email: token?.email\n                }\n            });\n            if (db_user) {\n                token.id = db_user.id;\n            }\n            return token;\n        },\n        session: ({ session, token })=>{\n            if (token) {\n                session.user.id = token.id;\n                session.user.name = token.name;\n                session.user.email = token.email;\n                session.user.image = token.picture;\n            }\n            return session;\n        }\n    },\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_lib_db__WEBPACK_IMPORTED_MODULE_3__.prisma),\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        })\n    ]\n};\nconst getAuthSession = ()=>{\n    return (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(authOptions);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL25leHRhdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEQ7QUFNdkM7QUFDcUM7QUFDdEI7QUF1QjNCLE1BQU1JLGNBQStCO0lBQzFDQyxTQUFTO1FBQ1BDLFVBQVU7SUFDWjtJQUNBQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7SUFDbkNDLFdBQVc7UUFDVEMsS0FBSyxPQUFPLEVBQUVDLEtBQUssRUFBRTtZQUNuQixNQUFNQyxVQUFVLE1BQU1YLDJDQUFNQSxDQUFDWSxJQUFJLENBQUNDLFNBQVMsQ0FBQztnQkFDMUNDLE9BQU87b0JBQ0xDLE9BQU9MLE9BQU9LO2dCQUNoQjtZQUNGO1lBQ0EsSUFBSUosU0FBUztnQkFDWEQsTUFBTU0sRUFBRSxHQUFHTCxRQUFRSyxFQUFFO1lBQ3ZCO1lBQ0EsT0FBT047UUFDVDtRQUNBUixTQUFTLENBQUMsRUFBRUEsT0FBTyxFQUFFUSxLQUFLLEVBQUU7WUFDMUIsSUFBSUEsT0FBTztnQkFDVFIsUUFBUVUsSUFBSSxDQUFDSSxFQUFFLEdBQUdOLE1BQU1NLEVBQUU7Z0JBQzFCZCxRQUFRVSxJQUFJLENBQUNLLElBQUksR0FBR1AsTUFBTU8sSUFBSTtnQkFDOUJmLFFBQVFVLElBQUksQ0FBQ0csS0FBSyxHQUFHTCxNQUFNSyxLQUFLO2dCQUNoQ2IsUUFBUVUsSUFBSSxDQUFDTSxLQUFLLEdBQUdSLE1BQU1TLE9BQU87WUFDcEM7WUFDQSxPQUFPakI7UUFDVDtJQUNGO0lBQ0FrQixTQUFTdkIsd0VBQWFBLENBQUNHLDJDQUFNQTtJQUM3QnFCLFdBQVc7UUFDVHRCLHNFQUFjQSxDQUFDO1lBQ2J1QixVQUFVakIsUUFBUUMsR0FBRyxDQUFDaUIsZ0JBQWdCO1lBQ3RDQyxjQUFjbkIsUUFBUUMsR0FBRyxDQUFDbUIsb0JBQW9CO1FBQ2hEO0tBQ0Q7QUFDSCxFQUFFO0FBRUssTUFBTUMsaUJBQWlCO0lBQzVCLE9BQU81QiwyREFBZ0JBLENBQUNHO0FBQzFCLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9xdWl6bWlmeS8uL3NyYy9saWIvbmV4dGF1dGgudHM/ODZiMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFBZGFwdGVyIH0gZnJvbSBcIkBuZXh0LWF1dGgvcHJpc21hLWFkYXB0ZXJcIjtcbmltcG9ydCB7IHR5cGUgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBnZXRTZXJ2ZXJTZXNzaW9uLFxuICB0eXBlIE5leHRBdXRoT3B0aW9ucyxcbiAgdHlwZSBEZWZhdWx0U2Vzc2lvbixcbn0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IEdvb2dsZVByb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZVwiO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL2RiXCI7XG5cbmRlY2xhcmUgbW9kdWxlIFwibmV4dC1hdXRoXCIge1xuICBpbnRlcmZhY2UgU2Vzc2lvbiBleHRlbmRzIERlZmF1bHRTZXNzaW9uIHtcbiAgICB1c2VyOiB7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgLy8gLi4ub3RoZXIgcHJvcGVydGllc1xuICAgICAgLy8gcm9sZTogVXNlclJvbGU7XG4gICAgfSAmIERlZmF1bHRTZXNzaW9uW1widXNlclwiXTtcbiAgfVxuXG4gIC8vIGludGVyZmFjZSBVc2VyIHtcbiAgLy8gICAvLyAuLi5vdGhlciBwcm9wZXJ0aWVzXG4gIC8vICAgLy8gcm9sZTogVXNlclJvbGU7XG4gIC8vIH1cbn1cblxuZGVjbGFyZSBtb2R1bGUgXCJuZXh0LWF1dGgvand0XCIge1xuICBpbnRlcmZhY2UgSldUIHtcbiAgICBpZDogc3RyaW5nO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXG4gIH0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICBjYWxsYmFja3M6IHtcbiAgICBqd3Q6IGFzeW5jICh7IHRva2VuIH0pID0+IHtcbiAgICAgIGNvbnN0IGRiX3VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGVtYWlsOiB0b2tlbj8uZW1haWwsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGlmIChkYl91c2VyKSB7XG4gICAgICAgIHRva2VuLmlkID0gZGJfdXNlci5pZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIHNlc3Npb246ICh7IHNlc3Npb24sIHRva2VuIH0pID0+IHtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZDtcbiAgICAgICAgc2Vzc2lvbi51c2VyLm5hbWUgPSB0b2tlbi5uYW1lO1xuICAgICAgICBzZXNzaW9uLnVzZXIuZW1haWwgPSB0b2tlbi5lbWFpbDtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmltYWdlID0gdG9rZW4ucGljdHVyZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gIH0sXG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIocHJpc21hKSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgYXMgc3RyaW5nLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCBhcyBzdHJpbmcsXG4gICAgfSksXG4gIF0sXG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QXV0aFNlc3Npb24gPSAoKSA9PiB7XG4gIHJldHVybiBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbn07XG4iXSwibmFtZXMiOlsiUHJpc21hQWRhcHRlciIsImdldFNlcnZlclNlc3Npb24iLCJHb29nbGVQcm92aWRlciIsInByaXNtYSIsImF1dGhPcHRpb25zIiwic2Vzc2lvbiIsInN0cmF0ZWd5Iiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwiZGJfdXNlciIsInVzZXIiLCJmaW5kRmlyc3QiLCJ3aGVyZSIsImVtYWlsIiwiaWQiLCJuYW1lIiwiaW1hZ2UiLCJwaWN0dXJlIiwiYWRhcHRlciIsInByb3ZpZGVycyIsImNsaWVudElkIiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwiZ2V0QXV0aFNlc3Npb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/nextauth.ts\n");

/***/ }),

/***/ "(rsc)/./src/schemas/questions.ts":
/*!**********************************!*\
  !*** ./src/schemas/questions.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkAnswerSchema: () => (/* binding */ checkAnswerSchema),\n/* harmony export */   endGameSchema: () => (/* binding */ endGameSchema),\n/* harmony export */   getQuestionsSchema: () => (/* binding */ getQuestionsSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\nconst getQuestionsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    topic: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    amount: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().int().positive().min(1).max(10),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"mcq\",\n        \"open_ended\"\n    ])\n});\nconst checkAnswerSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    userInput: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    questionId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nconst endGameSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    gameId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2NoZW1hcy9xdWVzdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QjtBQUVqQixNQUFNQyxxQkFBcUJELGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDekNDLE9BQU9ILGtDQUFDQSxDQUFDSSxNQUFNO0lBQ2ZDLFFBQVFMLGtDQUFDQSxDQUFDTSxNQUFNLEdBQUdDLEdBQUcsR0FBR0MsUUFBUSxHQUFHQyxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDO0lBQy9DQyxNQUFNWCxrQ0FBQ0EsQ0FBQ1ksSUFBSSxDQUFDO1FBQUM7UUFBTztLQUFhO0FBQ3BDLEdBQUc7QUFFSSxNQUFNQyxvQkFBb0JiLGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDeENZLFdBQVdkLGtDQUFDQSxDQUFDSSxNQUFNO0lBQ25CVyxZQUFZZixrQ0FBQ0EsQ0FBQ0ksTUFBTTtBQUN0QixHQUFHO0FBRUksTUFBTVksZ0JBQWdCaEIsa0NBQUNBLENBQUNFLE1BQU0sQ0FBQztJQUNwQ2UsUUFBUWpCLGtDQUFDQSxDQUFDSSxNQUFNO0FBQ2xCLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9xdWl6bWlmeS8uL3NyYy9zY2hlbWFzL3F1ZXN0aW9ucy50cz85NDEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjb25zdCBnZXRRdWVzdGlvbnNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRvcGljOiB6LnN0cmluZygpLFxuICBhbW91bnQ6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoKS5taW4oMSkubWF4KDEwKSxcbiAgdHlwZTogei5lbnVtKFtcIm1jcVwiLCBcIm9wZW5fZW5kZWRcIl0pLFxufSk7XG5cbmV4cG9ydCBjb25zdCBjaGVja0Fuc3dlclNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdXNlcklucHV0OiB6LnN0cmluZygpLFxuICBxdWVzdGlvbklkOiB6LnN0cmluZygpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBlbmRHYW1lU2NoZW1hID0gei5vYmplY3Qoe1xuICBnYW1lSWQ6IHouc3RyaW5nKCksXG59KTtcbiJdLCJuYW1lcyI6WyJ6IiwiZ2V0UXVlc3Rpb25zU2NoZW1hIiwib2JqZWN0IiwidG9waWMiLCJzdHJpbmciLCJhbW91bnQiLCJudW1iZXIiLCJpbnQiLCJwb3NpdGl2ZSIsIm1pbiIsIm1heCIsInR5cGUiLCJlbnVtIiwiY2hlY2tBbnN3ZXJTY2hlbWEiLCJ1c2VySW5wdXQiLCJxdWVzdGlvbklkIiwiZW5kR2FtZVNjaGVtYSIsImdhbWVJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/schemas/questions.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/@babel","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/uuid","vendor-chunks/@next-auth","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/mime-db","vendor-chunks/zod","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/form-data","vendor-chunks/asynckit","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/delayed-stream","vendor-chunks/has-flag","vendor-chunks/openai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fquestions%2Froute&page=%2Fapi%2Fquestions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fquestions%2Froute.ts&appDir=E%3A%5CDheeraj%5CSNU%5C6th%20Semester%5CIntroduction%20to%20Database%20Systems(CSD317)%5CProject%5CQuizmify%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CDheeraj%5CSNU%5C6th%20Semester%5CIntroduction%20to%20Database%20Systems(CSD317)%5CProject%5CQuizmify&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();